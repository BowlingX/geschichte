(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const query_string_1=__webpack_require__(355),react_1=__webpack_require__(0),zustand_1=__importDefault(__webpack_require__(793)),shallow_1=__importDefault(__webpack_require__(356)),middleware_1=__webpack_require__(794),utils_1=__webpack_require__(219);exports.DEFAULT_NAMESPACE="default",exports.StoreContext=react_1.createContext(null),exports.geschichte=historyInstance=>zustand_1.default(middleware_1.immerWithPatches(middleware_1.historyManagement(historyInstance)(middleware_1.converter(historyInstance)))),exports.factoryParameters=(config,initialValues={},ns=exports.DEFAULT_NAMESPACE)=>{const flatConfig=utils_1.flattenConfig(config);return{useQuery:()=>{const[useStore,api]=react_1.useContext(exports.StoreContext),callback=react_1.useCallback(({register:register,pushState:pushState,replaceState:replaceState,resetPush:resetPush,resetReplace:resetReplace})=>({pushState:pushState,register:register,replaceState:replaceState,resetPush:resetPush,resetReplace:resetReplace}),[useStore]),{register:register,pushState:pushState,replaceState:replaceState,resetPush:resetPush,resetReplace:resetReplace}=useStore(callback);react_1.useMemo(()=>{register(config,flatConfig,ns,initialValues)},[]);const initialNamespaceValues=useStore(state=>state.namespaces[ns]),[innerValues,setInnerValues]=react_1.useState(initialNamespaceValues);return react_1.useEffect(()=>{const unsubscribe=api.subscribe(state=>{state&&setInnerValues(Object.assign(Object.assign({},innerValues),state))},state=>({initialValues:state.namespaces[ns].initialValues,values:state.namespaces[ns].values}),shallow_1.default);return()=>{unsubscribe(),innerValues.unsubscribe()}},[setInnerValues]),react_1.useMemo(()=>({createQueryString:values=>query_string_1.stringify(utils_1.createQueryObject(flatConfig,ns,values||innerValues.values,innerValues.initialValues)),initialValues:innerValues.initialValues,pushState:state=>pushState(ns,state),replaceState:state=>replaceState(ns,state),resetPush:()=>resetPush(ns),resetReplace:()=>resetReplace(ns),values:innerValues.values}),[innerValues,pushState,replaceState,resetPush,resetReplace])},createQueryString:values=>query_string_1.stringify(utils_1.createQueryObject(flatConfig,ns,values,initialValues))}};try{exports.geschichte.displayName="geschichte",exports.geschichte.__docgenInfo={description:"",displayName:"geschichte",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"Action"}},location:{defaultValue:null,description:"",name:"location",required:!0,type:{name:"Location<any>"}},push:{defaultValue:null,description:"",name:"push",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},replace:{defaultValue:null,description:"",name:"replace",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},go:{defaultValue:null,description:"",name:"go",required:!0,type:{name:"(n: number) => void"}},goBack:{defaultValue:null,description:"",name:"goBack",required:!0,type:{name:"() => void"}},goForward:{defaultValue:null,description:"",name:"goForward",required:!0,type:{name:"() => void"}},block:{defaultValue:null,description:"",name:"block",required:!0,type:{name:"(prompt?: string | boolean | TransitionPromptHook<any>) => UnregisterCallback"}},listen:{defaultValue:null,description:"",name:"listen",required:!0,type:{name:"(listener: LocationListener<any>) => UnregisterCallback"}},createHref:{defaultValue:null,description:"",name:"createHref",required:!0,type:{name:"(location: LocationDescriptorObject<any>) => string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/store.ts#geschichte"]={docgenInfo:exports.geschichte.__docgenInfo,name:"geschichte",path:"src/lib/store.ts#geschichte"})}catch(__react_docgen_typescript_loader_error){}},219:function(module,exports,__webpack_require__){"use strict";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const shallow_1=__importDefault(__webpack_require__(356)),store_1=__webpack_require__(218);exports.pm=(name,serializer)=>()=>({name:name,serializer:serializer});exports.formatNamespace=(key,ns)=>ns&&ns!==store_1.DEFAULT_NAMESPACE?`${ns}.${key}`:key,exports.get=(object,path)=>path.reduce((next,key)=>next[key],object),exports.skipValue=(value,initialValue)=>null==value||shallow_1.default(value,initialValue)||Array.isArray(value)&&0===value.length,exports.createQueriesFromPatch=(config,ns,patch,state,initialState)=>patch.reduce((next,item)=>{const{path:path,op:op}=item,[,,,...objectPath]=path,possibleParameter=exports.get(config,objectPath);if("function"!=typeof possibleParameter)return next;const{name:name,serializer:serializer,skip:skip}=possibleParameter(),value=exports.get(state,objectPath),initialValue=exports.get(initialState,objectPath),nextValue=exports.skipValue(value,initialValue)?void 0:value;return Object.assign(Object.assign({},next),{[exports.formatNamespace(name,ns)]:void 0===nextValue?nextValue:serializer.serialize(nextValue)})},{}),exports.createQueryObject=(config,ns,values,initialState)=>Object.keys(config).reduce((next,parameter)=>{const{path:path,serializer:serializer}=config[parameter],possibleValue=exports.get(values,path),nextValue=exports.skipValue(possibleValue,exports.get(initialState,path))?void 0:possibleValue;return void 0===nextValue?next:Object.assign(Object.assign({},next),{[exports.formatNamespace(parameter,ns)]:serializer.serialize(nextValue)})},{}),exports.applyDiffWithCreateQueriesFromPatch=(config,ns,currentQuery,patch,state,initialState)=>{const query=exports.createQueriesFromPatch(config,ns,patch,state,initialState),nextQueries=Object.assign(Object.assign({},currentQuery),query);return Object.keys(nextQueries).filter(key=>void 0!==nextQueries[key]).reduce((next,key)=>Object.assign(Object.assign({},next),{[key]:nextQueries[key]}),{})},exports.applyFlatConfigToState=(config,queryValues,ns,state,initialState)=>Object.keys(config).reduce((next,queryParameter)=>{const{path:path,serializer:serializer}=config[queryParameter],nsQueryParameter=exports.formatNamespace(queryParameter,ns),maybeValue=queryValues[nsQueryParameter],value=void 0===maybeValue?exports.get(initialState,path):serializer.deserialize(maybeValue);return((obj,path,value=null)=>{let current=obj,thisPath=[...path];for(;path.length>1;){const[head,...tail]=thisPath;thisPath=tail,void 0===current[head]&&(current[head]={}),current=current[head]}current[thisPath[0]]=value})(state,path,value),exports.skipValue(value,exports.get(initialState,path))?next:Object.assign(Object.assign({},next),{[nsQueryParameter]:value})},{}),exports.flattenConfig=(config,path=[])=>Object.keys(config).reduce((next,key)=>{const v=config[key],nextPath=[...path,key];if("function"==typeof v){const _a=v(),{name:name}=_a,rest=__rest(_a,["name"]);if(void 0!==next[name])throw new Error(`Config invalid: Multiple definitions found for ${name}.`);return Object.assign(Object.assign({},next),{[name]:Object.assign({path:nextPath},rest)})}return"object"==typeof v?Object.assign(Object.assign({},next),exports.flattenConfig(v,nextPath)):next},{});try{exports.skipValue.displayName="skipValue",exports.skipValue.__docgenInfo={description:"Default skip implementation",displayName:"skipValue",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/utils.ts#skipValue"]={docgenInfo:exports.skipValue.__docgenInfo,name:"skipValue",path:"src/lib/utils.ts#skipValue"})}catch(__react_docgen_typescript_loader_error){}try{exports.createQueriesFromPatch.displayName="createQueriesFromPatch",exports.createQueriesFromPatch.__docgenInfo={description:"@return an object with the keys that have been processed\nif a key has been removed / set to undefined, we still return it to\nbe able to create a diff to the current state",displayName:"createQueriesFromPatch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/utils.ts#createQueriesFromPatch"]={docgenInfo:exports.createQueriesFromPatch.__docgenInfo,name:"createQueriesFromPatch",path:"src/lib/utils.ts#createQueriesFromPatch"})}catch(__react_docgen_typescript_loader_error){}try{exports.createQueryObject.displayName="createQueryObject",exports.createQueryObject.__docgenInfo={description:"Creates a queryObject that can be serialized.",displayName:"createQueryObject",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/utils.ts#createQueryObject"]={docgenInfo:exports.createQueryObject.__docgenInfo,name:"createQueryObject",path:"src/lib/utils.ts#createQueryObject"})}catch(__react_docgen_typescript_loader_error){}try{exports.applyFlatConfigToState.displayName="applyFlatConfigToState",exports.applyFlatConfigToState.__docgenInfo={description:"Applies the given queryValues to the current state, based on the configuration\nImportant: Mutates `state`.\n@return an object with the keys that have been processed",displayName:"applyFlatConfigToState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/utils.ts#applyFlatConfigToState"]={docgenInfo:exports.applyFlatConfigToState.__docgenInfo,name:"applyFlatConfigToState",path:"src/lib/utils.ts#applyFlatConfigToState"})}catch(__react_docgen_typescript_loader_error){}try{exports.flattenConfig.displayName="flattenConfig",exports.flattenConfig.__docgenInfo={description:"Creates a flat serializable object based on a mapping Object\nthat can be used to generate a query string.\n@return a key/value object with the object containing the defined parameters as key.",displayName:"flattenConfig",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/utils.ts#flattenConfig"]={docgenInfo:exports.flattenConfig.__docgenInfo,name:"flattenConfig",path:"src/lib/utils.ts#flattenConfig"})}catch(__react_docgen_typescript_loader_error){}},222:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var provider_1=__webpack_require__(789);exports.default=provider_1.Geschichte;var serializers_1=__webpack_require__(796);exports.serializers=serializers_1.serializers;var store_1=__webpack_require__(218);exports.factoryParameters=store_1.factoryParameters;var utils_1=__webpack_require__(219);exports.pm=utils_1.pm},364:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const history_1=__webpack_require__(223),react_1=__importDefault(__webpack_require__(0)),index_1=__importStar(__webpack_require__(222)),history=history_1.createBrowserHistory(),config={arg:index_1.pm("arg",index_1.serializers.string),test:index_1.pm("foo",index_1.serializers.string)},{useQuery:useQuery}=index_1.factoryParameters(config,{arg:"blub",test:"haha"}),{useQuery:useAnotherQuery}=index_1.factoryParameters(config,{arg:"xyz",test:"another"},"wow"),InnerApp=()=>{const{values:values,pushState:pushState}=useQuery();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",{type:"text",value:values.test,onChange:event=>{pushState(state=>void(state.test=event.target.value))}}),react_1.default.createElement("p",null,JSON.stringify(values)))},DifferentApp=()=>{const{values:otherNsValues,pushState:pushState,resetPush:resetPush}=useAnotherQuery();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",{type:"text",value:otherNsValues.test,onChange:event=>{pushState(state=>void(state.test=event.target.value))}}),react_1.default.createElement("button",{onClick:()=>resetPush()},"Reset"))};exports.App=()=>react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(index_1.default,{history:history},react_1.default.createElement("h3",null,"A sample Application"),react_1.default.createElement(InnerApp,null),react_1.default.createElement(DifferentApp,null)))},365:function(module,exports,__webpack_require__){__webpack_require__(366),__webpack_require__(477),__webpack_require__(478),module.exports=__webpack_require__(783)},387:function(module,exports){},783:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(220);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(785),module)}.call(this,__webpack_require__(784)(module))},785:function(module,exports,__webpack_require__){var map={"./geschichte.stories.mdx":786};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=785},786:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"history",(function(){return history})),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(1),__webpack_require__(67),__webpack_require__(37),__webpack_require__(7),__webpack_require__(4),__webpack_require__(42),__webpack_require__(40),__webpack_require__(787),__webpack_require__(788),__webpack_require__(5),__webpack_require__(38),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(30),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(89),_examples_index_tsx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(364),_index__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(222),_index__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_index__WEBPACK_IMPORTED_MODULE_15__),history__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(223);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var history=Object(history__WEBPACK_IMPORTED_MODULE_16__.createBrowserHistory)(),layoutProps={history:history},MDXLayout="wrapper",_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.Meta,{title:"Components|Geschichte",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",null,"Geschichte Provider"),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"Provides a global state for all namespaces."),_ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.Props,{of:_index__WEBPACK_IMPORTED_MODULE_15___default.a,mdxType:"Props"}),_ref6=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h2",null,"Example"),_ref7=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"You require to define a Toplevel ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("inlineCode",{parentName:"p"},"<Geschichte />")," component in your tree to be able\nto use any of the provides hooks."),_ref8=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h2",null,"Test"),_ref9=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_examples_index_tsx__WEBPACK_IMPORTED_MODULE_14__.App,{mdxType:"App"});function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(MDXLayout,_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-jsx",metastring:"harmony",harmony:!0}),"import Geschichte from 'geschichte'\nimport { createBrowserHistory } from 'history'\n\nconst history = createBrowserHistory()\n\nexport const App = () => (\n  <Geschichte history={history}>\n   {/* your component tree */}\n  </Geschichte>\n)\n")),_ref8,_ref9)}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Components|Geschichte",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:function container(_ref10){var context=_ref10.context,children=_ref10.children;return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.DocsContainer,{context:_objectSpread({},context,{mdxStoryNameToId:mdxStoryNameToId})},children)},page:MDXContent},__webpack_exports__.default=componentMeta},789:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__importStar(__webpack_require__(0)),store_1=__webpack_require__(218);exports.Geschichte=({children:children,history:history})=>{const value=react_1.useMemo(()=>store_1.geschichte(history),[]),[useStore]=value,unregister=useStore(state=>state.unregister);return react_1.useEffect(()=>()=>unregister(),[unregister]),react_1.default.createElement(store_1.StoreContext.Provider,{value:value},children)};try{exports.Geschichte.displayName="Geschichte",exports.Geschichte.__docgenInfo={description:"",displayName:"Geschichte",props:{history:{defaultValue:null,description:"a history instance (e.g. createBrowserHistory())",name:"history",required:!0,type:{name:"History<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/provider.tsx#Geschichte"]={docgenInfo:exports.Geschichte.__docgenInfo,name:"Geschichte",path:"src/lib/provider.tsx#Geschichte"})}catch(__react_docgen_typescript_loader_error){}},794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const immer_1=__webpack_require__(795),query_string_1=__webpack_require__(355),utils_1=__webpack_require__(219);var HistoryEventType;!function(HistoryEventType){HistoryEventType[HistoryEventType.PUSH=0]="PUSH",HistoryEventType[HistoryEventType.REPLACE=1]="REPLACE",HistoryEventType[HistoryEventType.REGISTER=2]="REGISTER"}(HistoryEventType=exports.HistoryEventType||(exports.HistoryEventType={})),exports.historyManagement=historyInstance=>apply=>(set,get,api)=>apply((fn,type,ns)=>{set((changes,values)=>{if(0===changes.length)return values;if(type!==HistoryEventType.REGISTER){const affectedNamespaces=ns?[ns]:changes.reduce((next,change)=>{const{path:[,namespace]}=change;return-1!==next.indexOf(namespace)?[...next,namespace]:next},[]),uniqueQueries=affectedNamespaces.reduce((next,thisNs)=>{const{config:config,query:currentQuery}=get().namespaces[thisNs];return Object.assign(Object.assign({},next),{[thisNs]:utils_1.applyDiffWithCreateQueriesFromPatch(config,thisNs,currentQuery,changes,values.namespaces[thisNs].values,values.namespaces[thisNs].initialValues)})},{}),method=type===HistoryEventType.PUSH?"push":"replace",otherQueries=Object.keys(values.namespaces).reduce((next,thisNs)=>thisNs===ns?next:Object.assign(Object.assign({},next),values.namespaces[thisNs].query),{}),reducedQueries=Object.keys(uniqueQueries).reduce((next,thisNs)=>Object.assign(Object.assign({},next),uniqueQueries[thisNs]),{}),query=query_string_1.stringify(Object.assign(Object.assign({},otherQueries),reducedQueries));return historyInstance[method]({search:""===query?"":`?${query}`,state:{__g__:!0}}),Object.assign(Object.assign({},values),{namespaces:Object.assign(Object.assign({},values.namespaces),affectedNamespaces.reduce((next,thisNs)=>({[thisNs]:Object.assign(Object.assign({},values.namespaces[thisNs]),{query:uniqueQueries[thisNs]})}),{}))})}return values},fn,ns)},get,api);exports.immerWithPatches=config=>(set,get,api)=>config((valueMapper,fn,ns)=>{set(currentState=>{const[nextValues,changes]=immer_1.produceWithPatches(((fn,ns)=>state=>{if(!ns){const result=fn(state.namespaces);return void(result&&(state.namespaces=result))}if(state.namespaces[ns])return void fn(state.namespaces[ns]);const next={};fn(next),state.namespaces[ns]=next})(fn,ns))(currentState);return valueMapper(changes,nextValues)})},get,api),exports.converter=historyInstance=>(set,get)=>{const initialQueries=query_string_1.parse(historyInstance.location.search),unregisterListener=historyInstance.listen((location,action)=>{if("PUSH"===action||"REPLACE"===action&&location.state&&location.state.__g__)return;const nextQueries=query_string_1.parse(location.search),namespaces=get().namespaces;Object.keys(namespaces).forEach(ns=>{set(state=>{state.query=utils_1.applyFlatConfigToState(state.mappedConfig,nextQueries,ns,state.values,state.initialValues)},HistoryEventType.REGISTER,ns)})}),reset=(ns,event)=>set(state=>void Object.keys(state.values).forEach(key=>{void 0!==state.initialValues[key]&&(state.values[key]=state.initialValues[key])}),event,ns);return{batchPushState:(ns,fn)=>{set(state=>fn(...ns.map(thisNs=>state[thisNs].values)),HistoryEventType.PUSH)},batchReplaceState:(ns,fn)=>{set(state=>fn(...ns.map(thisNs=>state[thisNs].values)),HistoryEventType.REPLACE)},namespaces:{},pushState:(ns,fn)=>set(state=>fn(state.values),HistoryEventType.PUSH,ns),register:(config,mappedConfig,ns,initialValues)=>{void 0===get().namespaces[ns]?set(state=>{state.subscribers=1,state.unsubscribe=()=>{set(thisState=>{thisState[ns]&&(thisState[ns].subscribers=thisState[ns].subscribers-1,0===thisState[ns].subscribers&&delete thisState[ns])},HistoryEventType.REGISTER)},state.mappedConfig=mappedConfig,state.config=config,state.initialValues=initialValues||{},state.values=Object.assign({},initialValues),state.query=utils_1.applyFlatConfigToState(mappedConfig,initialQueries,ns,state.values,state.initialValues)},HistoryEventType.REGISTER,ns):set(state=>{state.subscribers=state.subscribers+1},HistoryEventType.REGISTER,ns)},replaceState:(ns,fn)=>set(state=>fn(state.values),HistoryEventType.REPLACE,ns),resetPush:ns=>reset(ns,HistoryEventType.PUSH),resetReplace:ns=>reset(ns,HistoryEventType.REPLACE),unregister:()=>{set(()=>({}),HistoryEventType.REGISTER),unregisterListener()}}};try{exports.historyManagement.displayName="historyManagement",exports.historyManagement.__docgenInfo={description:"",displayName:"historyManagement",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"Action"}},location:{defaultValue:null,description:"",name:"location",required:!0,type:{name:"Location<any>"}},push:{defaultValue:null,description:"",name:"push",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},replace:{defaultValue:null,description:"",name:"replace",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},go:{defaultValue:null,description:"",name:"go",required:!0,type:{name:"(n: number) => void"}},goBack:{defaultValue:null,description:"",name:"goBack",required:!0,type:{name:"() => void"}},goForward:{defaultValue:null,description:"",name:"goForward",required:!0,type:{name:"() => void"}},block:{defaultValue:null,description:"",name:"block",required:!0,type:{name:"(prompt?: string | boolean | TransitionPromptHook<any>) => UnregisterCallback"}},listen:{defaultValue:null,description:"",name:"listen",required:!0,type:{name:"(listener: LocationListener<any>) => UnregisterCallback"}},createHref:{defaultValue:null,description:"",name:"createHref",required:!0,type:{name:"(location: LocationDescriptorObject<any>) => string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/middleware.ts#historyManagement"]={docgenInfo:exports.historyManagement.__docgenInfo,name:"historyManagement",path:"src/lib/middleware.ts#historyManagement"})}catch(__react_docgen_typescript_loader_error){}try{exports.immerWithPatches.displayName="immerWithPatches",exports.immerWithPatches.__docgenInfo={description:"",displayName:"immerWithPatches",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/middleware.ts#immerWithPatches"]={docgenInfo:exports.immerWithPatches.__docgenInfo,name:"immerWithPatches",path:"src/lib/middleware.ts#immerWithPatches"})}catch(__react_docgen_typescript_loader_error){}try{exports.converter.displayName="converter",exports.converter.__docgenInfo={description:"",displayName:"converter",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"Action"}},location:{defaultValue:null,description:"",name:"location",required:!0,type:{name:"Location<any>"}},push:{defaultValue:null,description:"",name:"push",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},replace:{defaultValue:null,description:"",name:"replace",required:!0,type:{name:"{ (path: string, state?: any): void; (location: LocationDescriptorObject<any>): void; }"}},go:{defaultValue:null,description:"",name:"go",required:!0,type:{name:"(n: number) => void"}},goBack:{defaultValue:null,description:"",name:"goBack",required:!0,type:{name:"() => void"}},goForward:{defaultValue:null,description:"",name:"goForward",required:!0,type:{name:"() => void"}},block:{defaultValue:null,description:"",name:"block",required:!0,type:{name:"(prompt?: string | boolean | TransitionPromptHook<any>) => UnregisterCallback"}},listen:{defaultValue:null,description:"",name:"listen",required:!0,type:{name:"(listener: LocationListener<any>) => UnregisterCallback"}},createHref:{defaultValue:null,description:"",name:"createHref",required:!0,type:{name:"(location: LocationDescriptorObject<any>) => string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/middleware.ts#converter"]={docgenInfo:exports.converter.__docgenInfo,name:"converter",path:"src/lib/middleware.ts#converter"})}catch(__react_docgen_typescript_loader_error){}},796:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const join=value=>value.join("_"),split=value=>value.split("_"),intSerializer={deserialize:value=>parseInt(value,10)||null,serialize:value=>String(value)},floatSerializer={deserialize:value=>parseFloat(value)||null,serialize:value=>String(value)},stringSerializer={deserialize:value=>String(value),serialize:value=>String(value)},arrayStringSerializer={deserialize:value=>split(value),serialize:value=>value&&join(value)||null},arrayIntSerializer={deserialize:value=>split(value).map(intSerializer.deserialize),serialize:value=>value&&join(value)||null},arrayFloatSerializer={deserialize:value=>split(value).map(floatSerializer.deserialize),serialize:value=>value&&join(value)||null};exports.serializers={arrayFloat:arrayFloatSerializer,arrayInt:arrayIntSerializer,arrayString:arrayStringSerializer,boolean:{deserialize:value=>"1"===value,serialize:value=>value?"1":"0"},date:(locale="en-us",timeZone="UTC")=>({deserialize:value=>new Date(value),serialize:value=>value.toLocaleDateString(locale,{timeZone:timeZone})}),float:floatSerializer,int:intSerializer,string:stringSerializer}}},[[365,1,2]]]);
//# sourceMappingURL=main.36043ad126d3c89fb90d.bundle.js.map